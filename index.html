<!DOCTYPE html>
<html lang="en">
<head>

<link rel="stylesheet" href="style.css">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Online Flea Market</title>
<link rel="stylesheet" href="style.css">
<script src="script.js" defer></script>
</head>
<body>
<script type="module">
  // Import Firebase functions
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

  // Your Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyBTSEX-KMCddwLaKNCSEvEI0OQr58uayyg",
    authDomain: "we0023-59d22.firebaseapp.com",
    projectId: "we0023-59d22",
    storageBucket: "we0023-59d22.firebasestorage.app",
    messagingSenderId: "443902240610",
    appId: "1:443902240610:web:a649d92142e78c51b3ee3b"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Fetch products from Firestore
  async function loadProducts() {
    const container = document.getElementById("productsContainer");
    container.innerHTML = ""; // Clear container

    const querySnapshot = await getDocs(collection(db, "products")); // 'products' is your collection name
    querySnapshot.forEach((doc) => {
      const data = doc.data();
      const div = document.createElement("div");
      div.style.border = "1px solid #ccc";
      div.style.padding = "10px";
      div.style.width = "200px";

      div.innerHTML = `
        <h3>${data.name}</h3>
        <p>Category: ${data.category}</p>
        <p>Price: RM${data.price}</p>
      `;
      container.appendChild(div);
    });
  }

  // Call the function to load products
  loadProducts();
</script>

<header>
    <h1>Online Flea Market</h1>
</header>

<nav>
    <button onclick="location.href='index.html'">Home</button>
    <button onclick="location.href='upload.html'">Upload</button>
    <button onclick="location.href='rules.html'">Rules</button>
</nav>

<div class="container">
    <!-- Filters -->
<div style="margin-bottom:20px;">
    <label for="serviceFilter">Service Category:</label>
	<select id="serviceFilter" onchange="applyFilters()">
		<option value="">All Services</option>
		<option value="Selling">Selling</option>
		<option value="Renting">Renting</option>
	</select>

	<select id="productFilter" onchange="applyFilters()">
		<option value="All">All</option>
		<option value="Clothes">Clothes</option>
		<option value="Books">Books</option>
		<option value="Cosmetics">Cosmetics</option>
		<option value="Skin Care">Skin Care</option>
		<option value="Accessories">Accessories</option>
		<option value="Others">Others</option>
	</select>
	<div class="sortBox">
    <label>
		<input type="checkbox" id="sortLatest" onchange="applyFilters()">
		Latest → Oldest
	</label>

	<label>
		<input type="checkbox" id="sortCheap" onchange="applyFilters()">
		Cheapest → Expensive
	</label>

</div>


	<input type="range" id="priceRange" min="2" max="100" value="100"
       oninput="updatePriceLabel(this.value)">
	<span id="priceValue">RM100</span>
</div>

<!-- Products Container -->
<div id="productsContainer" style="display:flex;flex-wrap:wrap;gap:10px;"></div>
</div>


<script src="script.js"></script>

</body>
</html>







